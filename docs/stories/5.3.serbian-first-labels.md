# Story 5.3: Serbian-First Labels & Localization Audit

## Status
Ready for Dev

## Story
**As a** Serbian-first VenueIQ user,
**I want** all UI labels, notifications, and exports to default to Serbian Latin with accurate translations,
**so that** the application feels native while still supporting English when needed.

## Acceptance Criteria
1. Conduct a localization audit ensuring every user-facing string (UI labels, toasts, dialog copy, export text, accessibility descriptions) is sourced from RESX resources with Serbian Latin default entries and English equivalents.
2. Main screen and exports must surface Serbian labels by default on fresh install, including map controls, badge captions, tooltips, and dialog buttons.
3. Add automated guard (e.g., static analysis script or unit test) that fails build when new hard-coded strings (non-localized) are introduced in XAML or C# sources.
4. Update localization documentation/copy deck listing resource keys, Serbian text, English translations, and context to support future updates.
5. Validate localization toggling (Story 1.4) covers new strings; ensure runtime switch updates all refreshed views without requiring restart.
6. Tests: run localization guard test, UI automation verifying Serbian defaults on clean profile, manual/automated verification toggling to English then back to Serbian with consistent translations.
7. Ensure UX copy tone/terminology aligns with Serbian-first guidance in `docs/front-end-spec.md#9-localization-guidelines` including capitalization, diacritics, and gendered language nuances for prompts and badges.
8. Provide accessible fallback text for strings that cannot be translated (e.g., third-party map controls) and document rationale in copy deck.
9. Extend localization audit to exports, tooltips, badges, and analytics events, ensuring resource keys include context metadata (`Description`, `Usage`) for translators.

## Tasks / Subtasks
- [x] Resource audit (AC: 1-2,4)
  - [x] Inventory strings; migrated map ARIA and announcements to RESX; ensured badges/tooltips/exports localized (AC: 1)
  - [x] Update copy deck `docs/localization.md` with keys/translations/context (subset) (AC: 4)
  - [x] Note third-party exceptions and tone guidance (AC: 7-8)
- [x] Localization enforcement (AC: 3)
  - [x] Add test-based guard against hard-coded XAML/C# UI text (AC: 3)
  - [ ] Hook guard into CI (present in tests project) (AC: 3)
- [x] Runtime validation (AC: 2,5)
  - [x] Default culture set to `sr-Latn` at app startup via SettingsService + LocalizationService (AC: 2)
  - [x] New components bind via LocalizationResourceManager to update at runtime (AC: 5)
  - [x] Exports/tooltips use shared keys; fallbacks documented (AC: 9)
- [ ] Testing (AC: 6)
  - [x] Add unit test guard for XAML/C# UI literals (AC: 6)
  - [ ] UI automation verifying initial Serbian defaults and toggle (AC: 6)
  - [x] Copy deck created for manual QA review (AC: 4,6)
  - [ ] Regression comparing resource list vs doc (future enhancement) (AC: 4,7-9)

## Dev Notes
- Build on Story 1.4 implementation; this story ensures completeness across newly added UI (badges, tooltips, exports).
- Copy deck can live under `docs/localization.md`; coordinate with UX for final phrasing.
- For CI guard, consider Roslyn analyzer or regex script scanning for string literals outside resource usage; exclude logging strings if necessary.
- Ensure exports (Story 4.2) embed correct language fonts; double-check PDF templates load Serbian text properly.
- Align terminology for factor badges, tooltips, and export sections with approved Serbian glossary; includes abbreviations and units.
- Document fallback strategy for unlocalized third-party UI (e.g., map attributions) and provide translation notes.
- Plan periodic audit cadence (e.g., per release) so localization remains current; add reminder in copy deck.

### Testing
- Use `dotnet test` to run localization guard; optional additional static analysis step invoked via CI workflow created in Story 1.1.
- Manual QA should include verifying Serbian text quality with native speaker feedback.
- Manual localization review: check exports, tooltips, badges, analytics events, ensuring tone and diacritics match UX guidance.

## Change Log
| Date | Version | Description | Author |
|---|---|---|---|
| 2025-10-07 | 0.1 | Initial draft | Sarah (PO) |

## Dev Agent Record

### Agent Model Used

- dev (James)
### Debug Log References

- Default culture initialization added to App; XAML and code auditors in tests; ARIA/announcements localized; copy deck created.
### Completion Notes List

- Replaced inline map ARIA and announcements with RESX keys; added Serbian/English entries.
- Ensured tooltip and export UI reuse `LocalizationResourceManager` so runtime toggle reflects immediately.
- Added `LocalizationGuardTests` scanning XAML attributes and C# Text/Announce usage for hard-coded literals (allowlist for icon glyphs), failing on offenders.
- Created `docs/localization.md` with key list, translations, and context for recent features; marked third-party exceptions.
- Set default app culture to `sr-Latn` at startup using persisted preference.
### File List

- src/VenueIQ.App/App.xaml.cs
- src/VenueIQ.App/Controls/MapWebView.xaml
- src/VenueIQ.App/Views/MainPage.xaml.cs
- src/VenueIQ.App/Resources/Strings/AppResources.resx
- src/VenueIQ.App/Resources/Strings/AppResources.sr-Latn.resx
- tests/VenueIQ.Tests/Localization/LocalizationGuardTests.cs
- docs/localization.md
## QA Results
